<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <title>Homepage</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href="/css/common.css">
    <link rel="stylesheet" type="text/css" href="/css/nav-sidebar.css">
    <link rel="stylesheet" type="text/css" href="/css/home-common.css">
</head>
<body class="homepage-body">
<div class="top-bar">
    <h1 class="logo">
        <a href="/home" class="logo-link">
        <img src="/images/only-logo.png" alt="Inventorize Logo" class="logo-icon">
        <span class="logo-text">inventorize</span>
    </a></h1>
    <div class="btn-group">
        <a href='/logout' class="button">Logout</a>
    </div>
</div>
<div class="main-layout">
    <aside class="sidebar">
        <div class="sidebar-top">
            <div class="sidebar-user-info">
                <div class="sidebar-user-name" th:text="${user.firstName + ' ' + user.lastName}">John Doe</div>
                <div class="sidebar-user-role" th:text="${user.role.displayName}">Admin</div>
            </div>
            <div class="sidebar-section top-section">
                <a class="sidebar-btn rounded-btn home-btn" href="/home">Home</a>
            </div>
            <div class="sidebar-divider"></div>
            <div class="sidebar-section middle-section">
                <div class="sidebar-section-label">Business</div>
                <a class="sidebar-btn rounded-btn" th:href="@{'/businesses/' + ${business.id} + '/products'}">Products</a>
                <a class="sidebar-btn rounded-btn" th:href="@{'/businesses/' + ${business.id} + '/employees'}" sec:authorize="hasRole('ROLE_ADMIN') or hasRole('ROLE_MANAGER')">Employees</a>
            </div>
            <div class="sidebar-divider"></div>
            <div class="sidebar-section middle-section">
                <div class="sidebar-section-label">Profile settings</div>
                <a class="sidebar-btn rounded-btn" th:href="@{'/users/' + ${user.id} + '/profile'}">Edit Profile</a>
            </div>
        </div>
        <div class="sidebar-bottom">
            <div class="sidebar-divider"></div>
            <div class="sidebar-section bottom-section" sec:authorize="hasRole('ROLE_ADMIN')">
                <div class="sidebar-section-label">Admin</div>
                <a class="sidebar-btn rounded-btn" href="/businesses">Businesses</a>
                <a class="sidebar-btn rounded-btn" href="/users">Users</a>
            </div>
        </div>
    </aside>
    <main class="content-area">
        <div class="content-display">
            <div class="business-info-card" th:object="${business}">
                <h2 class="business-name" th:text="*{name}">Business Name</h2>
                <p class="business-type" th:text="*{businessType}">Business Type</p>
                <div class="business-details">
                    <div class="detail-item">
                        <span class="detail-label">Email:</span>
                        <span class="detail-value" th:text="*{email}">business@example.com</span>
                    </div>
                    <div class="detail-item">
                        <span class="detail-label">Phone Number:</span>
                        <span class="detail-value" th:text="*{phoneNumber}">+1 (555) 123-4567</span>
                    </div>
                    <div class="detail-item">
                        <span class="detail-label">Date Added:</span>
                        <span class="detail-value" th:text="*{#temporals.format(createdOn, 'dd MMM YYYY')}">Jan 01, 2025</span>
                    </div>
                    <div class="detail-item">
                        <span class="detail-label">Last Modified:</span>
                        <span class="detail-value" th:text="*{#temporals.format(updatedOn, 'dd MMM YYYY')}">Jan 01, 2025</span>
                    </div>
                </div>
                <div class="service-settings" sec:authorize="hasRole('ROLE_ADMIN') or hasRole('ROLE_MANAGER')">
                    <div class="service-setting-item">
                        <span class="service-label">Notifications Service:</span>
                        <div class="service-control">
                            <form th:action="@{'/businesses/' + ${business.id} + '/toggle-notifications'}" method="post">
                                <button type="submit" class="toggle-button" th:classappend="${business.notificationsEnabled ? 'enabled' : 'disabled'}">
                                    <span th:text="${business.notificationsEnabled ? 'Disable' : 'Enable'}">Toggle</span>
                                </button>
                            </form>
                        </div>
                    </div>
                    <div class="service-setting-item">
                        <span class="service-label">Restock Service:</span>
                        <div class="service-control">
                            <form th:action="@{'/businesses/' + ${business.id} + '/toggle-restock'}" method="post">
                                <button type="submit" class="toggle-button" th:classappend="${business.restockEnabled ? 'enabled' : 'disabled'}">
                                    <span th:text="${business.restockEnabled ? 'Disable' : 'Enable'}">Toggle</span>
                                </button>
                            </form>
                        </div>
                    </div>
                </div>
                <div class="edit-button-container" sec:authorize="hasRole('ROLE_ADMIN') or hasRole('ROLE_MANAGER')">
                    <a th:href="@{'/businesses/' + ${business.id} + '/edit'}" class="button edit-button">Edit</a>
            </div>
        </div>
    </main>
</div>
</body>
</html>

